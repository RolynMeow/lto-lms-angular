import{a as te}from"./chunk-NOALS7KU.js";import{a as O}from"./chunk-6B7C2XM3.js";import{n as X}from"./chunk-Y3WOYTIU.js";import{a as Q,b as ee}from"./chunk-UCIWEFFY.js";import{a as ie}from"./chunk-RVXGOUE5.js";import{$a as J,A as Y,Aa as Z,B as M,Ba as m,Ca as b,Da as w,G as I,H as L,Ka as B,La as y,M as h,Ma as k,N as f,Na as H,O as _,P as $,Ta as V,Ua as P,Va as D,W as C,X as r,Xa as E,Y as u,Ya as q,_a as z,aa as x,ba as R,c as F,ca as c,db as K,fb as U,hb as G,ib as W,ka as o,la as s,ma as p,na as N,oa as A,pa as S,ra as v,sa as a}from"./chunk-EDIASGHK.js";import"./chunk-5FZOKLP6.js";function pe(i,d){if(i&1){let e=S();o(0,"div",3),v("click",function(n){let l=h(e).$implicit,g=a();return f(g.show(l.id,n))}),o(1,"div",4)(2,"div",5)(3,"div",6),p(4,"img",7),s(),o(5,"div",8)(6,"h2",9),m(7),s(),o(8,"div",10),m(9),s()(),o(10,"div",11),p(11,"apx-chart",12),o(12,"span",13),v("click",function(n){let l=h(e).$implicit,g=a();return f(g.bookmark(l.id,n))}),_(),o(13,"svg",14),p(14,"path",15),s()()()()()()}if(i&2){let e=d.$implicit,t=d.index,n=a();r(4),c("src",e.image||"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTaKl3SXWtGi6MYxpJElmY8smMg3I0vtZYPVA&s",C),r(3),b(e.title),r(2),w(" ",e.description," "),r(2),c("series",n.chartOptions[t].series)("colors",n.chartOptions[t].colors)("chart",n.chartOptions[t].chart)("labels",n.chartOptions[t].labels)("plotOptions",n.chartOptions[t].plotOptions)("dataLabels",n.chartOptions[t].dataLabels)("legend",n.chartOptions[t].legend),r(3),R("fill",e.is_bookmarked?"#28a745":"black")}}var ne=(()=>{class i{constructor(e,t){this.moduleService=e,this.router=t,this.chartOptions=[],this.modules$=this.moduleService.modules$,this.modules$.subscribe(n=>{this.chartOptions.push(...n.map(l=>this.chartConfig(l.progress)))})}ngOnInit(){this.moduleService.index().subscribe()}chartConfig(e){return{series:[e.total_lessons-e.completed_lessons,e.completed_lessons],colors:["#6c757d","#28a745"],labels:["Total","Completed"],chart:{height:150,width:150,type:"donut"},plotOptions:{pie:{donut:{labels:{show:!0}}}},legend:{show:!1},dataLabels:{enabled:!0}}}show(e,t){t.stopPropagation(),this.router.navigate(["module",e])}bookmark(e,t){t.stopPropagation(),this.moduleService.bookmark(e).subscribe()}static{this.\u0275fac=function(t){return new(t||i)(u(O),u(U))}}static{this.\u0275cmp=I({type:i,selectors:[["app-modules"]],decls:5,vars:3,consts:[[1,"fw-bold","font-monospace","px-5"],[1,"d-flex","flex-column","justify-content-around","gap-5","mx-5"],["class","card card-xxl-stretch rounded-4 user-select-none","style","height: 250px;","role","button",3,"click",4,"ngFor","ngForOf"],["role","button",1,"card","card-xxl-stretch","rounded-4","user-select-none",2,"height","250px",3,"click"],[1,"card-body","p-3"],[1,"d-flex","flex-row","justify-content-center","align-items-center","h-100","gap-3"],[1,"col-4","d-flex","justify-content-center","align-items-center","mx-4"],["height","175","width","175","alt","Module Image",3,"src"],[1,"col-4","d-flex","flex-column"],[1,"card-title","fw-bold","truncate-two-lines"],[1,"text-truncate","lh-base","w-75",2,"height","75px"],[1,"col-4","d-flex","flex-row","gap-2"],[3,"series","colors","chart","labels","plotOptions","dataLabels","legend"],["role","button",3,"click"],["width","25","height","25","viewBox","0 0 25 25","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M4.62305 22.3809C4.96289 22.5332 5.32031 22.6094 5.67188 22.6094C6.27734 22.6094 6.87109 22.3887 7.34961 21.9629L11.5898 18.1934C12.1074 17.7324 12.8887 17.7324 13.4062 18.1934L17.6465 21.9629C18.4043 22.6367 19.4492 22.7969 20.373 22.3809C21.2969 21.9648 21.8711 21.0781 21.8711 20.0645V4.6875C21.8711 3.28711 20.7324 2.14844 19.332 2.14844H5.66406C4.26367 2.14844 3.125 3.28711 3.125 4.6875V20.0645C3.125 21.0781 3.69922 21.9668 4.62305 22.3809ZM4.29688 4.6875C4.29688 3.93359 4.91016 3.32031 5.66406 3.32031H19.3359C20.0898 3.32031 20.7031 3.93359 20.7031 4.6875V20.0645C20.7031 20.6191 20.4023 21.084 19.8965 21.3125C19.3906 21.5391 18.8418 21.4551 18.4277 21.0879L14.1875 17.3184C13.707 16.8906 13.1035 16.6777 12.5 16.6777C11.8965 16.6777 11.2949 16.8906 10.8125 17.3184L6.57227 21.0879C6.1582 21.4551 5.60937 21.541 5.10352 21.3125C4.59766 21.0859 4.29688 20.6191 4.29688 20.0645V4.6875Z"]],template:function(t,n){t&1&&(o(0,"h1",0),m(1,"Modules"),s(),o(2,"div",1),x(3,pe,15,11,"div",2),y(4,"async"),s()),t&2&&(r(3),c("ngForOf",k(4,1,n.modules$)))},dependencies:[V,Q,E]})}}return i})();var oe=(()=>{class i{constructor(){this._env=W,this._lessons=new F([]),this._lesson=new F(null)}get lessons$(){return this._lessons.asObservable()}get lesson$(){return this._lesson.asObservable()}set lessons(e){this._lessons.next(e)}set lesson(e){this._lesson.next(e)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Y({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var he=i=>({"background-color":i});function fe(i,d){if(i&1){let e=S();o(0,"div",5),v("click",function(){let n=h(e),l=n.$implicit,g=n.index,j=a().ngIf,le=a(),ce=Z(3);return f(le.view(l,ce,g,j.lessons))}),o(1,"div",6)(2,"h2",7),m(3),s(),o(4,"div",8),p(5,"img",9),s(),o(6,"div",10)(7,"div",11),m(8),s(),o(9,"span",12),_(),o(10,"svg",13),p(11,"path",14),s()()()()()}if(i&2){let e,t=d.$implicit,n=d.index;c("ngStyle",B(4,he,n%2===0?"#FFFAE7":"white")),r(3),b(t.title),r(2),c("src",(e=t.image)!==null&&e!==void 0?e:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTaKl3SXWtGi6MYxpJElmY8smMg3I0vtZYPVA&s",C),r(3),w(" ",t.description," ")}}function ve(i,d){if(i&1&&(N(0),o(1,"h1",2),m(2),s(),o(3,"div",3),x(4,fe,12,6,"div",4),s(),A()),i&2){let e=d.ngIf;r(2),b(e.title),r(2),c("ngForOf",e.lessons)}}function ge(i,d){if(i&1){let e=S();N(0),o(1,"div",15)(2,"div",16)(3,"span",17),v("click",function(){h(e);let n=a(2);return f(n.previous())}),_(),o(4,"svg",18),p(5,"path",19),s()(),$(),o(6,"div",20)(7,"div",21),p(8,"img",22),s()(),o(9,"span",17),v("click",function(){h(e);let n=a(2);return f(n.next())}),_(),o(10,"svg",18),p(11,"path",23),s()()(),$(),o(12,"button",24),v("click",function(){h(e);let n=a().$implicit;return f(n.dismiss("Cross click"))}),s()(),o(13,"div",25)(14,"h4",26),m(15),s(),o(16,"p",27),m(17),s(),o(18,"p",28),m(19),s()(),A()}if(i&2){let e,t=d.ngIf;r(8),c("src",(e=t.image)!==null&&e!==void 0?e:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTaKl3SXWtGi6MYxpJElmY8smMg3I0vtZYPVA&s",C),r(7),b(t.title),r(2),w(" ",t.description," "),r(2),w(" ",t.content," ")}}function xe(i,d){if(i&1&&(x(0,ge,20,4,"ng-container",1),y(1,"async")),i&2){let e=a();c("ngIf",k(1,1,e.lesson$))}}var se=(()=>{class i{constructor(e,t,n,l,g){this.moduleService=e,this.activatedRoute=t,this.canvas=n,this.lessonService=l,this.timeService=g,this.lessons=[],this.seconds=0,this.module$=this.moduleService.module$,this.lesson$=this.lessonService.lesson$,this.timeService.getElapsedTimeInSeconds().subscribe(j=>this.seconds=j)}ngOnInit(){let e=this.activatedRoute.snapshot.paramMap.get("id");this.moduleService.show(+e).subscribe()}view(e,t,n,l){this.lessons=l,this.index=n,this.lessonService.lesson=e,this.canvas.open(t,{position:"end"}),this.timerSubscription=this.timeService.startTimer().subscribe()}next(){console.log(this.index),this.track(),this.timerSubscription=this.timeService.startTimer().subscribe(),this.index++,this.lessonService.lesson=this.lessons[this.index],this.checker()}previous(){this.track(),this.timerSubscription=this.timeService.startTimer().subscribe(),this.index--,this.lessonService.lesson=this.lessons[this.index],this.checker()}checker(){this.lessons[this.index]||(this.canvas.dismiss(),this.timerSubscription.unsubscribe())}track(){this.timerSubscription.unsubscribe();let e=this.lessons[this.index];this.moduleService.track(e.id,this.seconds).subscribe(t=>this.moduleService.index().subscribe())}static{this.\u0275fac=function(t){return new(t||i)(u(O),u(K),u(X),u(oe),u(te))}}static{this.\u0275cmp=I({type:i,selectors:[["app-lessons"]],decls:4,vars:3,consts:[["content",""],[4,"ngIf"],[1,"fw-bold","font-monospace","px-5"],[1,"d-flex","flex-row","justify-content-around","my-2","gap-4","flex-wrap"],["class","col-4 card card-xxl-stretch rounded-4","style","width: 300px; height: 470px;","role","button",3,"ngStyle","click",4,"ngFor","ngForOf"],["role","button",1,"col-4","card","card-xxl-stretch","rounded-4",2,"width","300px","height","470px",3,"click","ngStyle"],[1,"card-body","p-5"],[1,"card-title","fw-bold","truncate-two-lines"],[1,"d-flex","justify-content-center","align-items-center","my-4"],["width","125","height","125","alt","Module Image",3,"src"],[1,"d-flex","align-items-end","gap-4"],[1,"truncate-last-line","lh-base",2,"width","150px","height","75px"],["role","button"],["width","16","height","17","viewBox","0 0 16 17","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M15.6643 9.25038C16.1107 8.83534 16.1107 8.16132 15.6643 7.74628L9.95 2.43378C9.50357 2.01874 8.77857 2.01874 8.33214 2.43378C7.88571 2.84882 7.88571 3.52284 8.33214 3.93788L12.1 7.43749H1.14286C0.510714 7.43749 0 7.91229 0 8.49999C0 9.08768 0.510714 9.56249 1.14286 9.56249H12.0964L8.33571 13.0621C7.88929 13.4771 7.88929 14.1512 8.33571 14.5662C8.78214 14.9812 9.50714 14.9812 9.95357 14.5662L15.6679 9.2537L15.6643 9.25038Z","fill","#40403F"],[1,"offcanvas-header","align-items-start"],[1,"d-flex","flex-row","justify-content-between","align-items-center","gap-2","w-100"],["role","button",3,"click"],["width","11","height","16","viewBox","0 0 11 16","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M10.75 15.75L0.484375 9.375V7.125L10.75 0.75V3.75L2.17188 8.25L10.75 12.75V15.75Z","fill","black"],[1,"card","rounded-4",2,"width","250px","height","250px","background-color","#FFFAE7"],[1,"d-flex","justify-content-center","align-items-center","h-100"],["width","215","height","215","alt","Module Image",3,"src"],["d","M0.25 15.75V12.75L8.82812 8.25L0.25 3.75V0.75L10.75 7.125V9.375L0.25 15.75Z","fill","black"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"offcanvas-body"],[1,"fw-bold","font-monospace"],[1,"my-2","fw-normal"],[1,"fw-normal","my-3"]],template:function(t,n){t&1&&(x(0,ve,5,2,"ng-container",1),y(1,"async"),x(2,xe,2,3,"ng-template",null,0,H)),t&2&&c("ngIf",k(1,1,n.module$))},dependencies:[V,P,D,E],styles:[`.truncate-last-line{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:unset;overflow:hidden;position:relative}.truncate-last-line:after{content:"...";position:absolute;right:0;bottom:0;background:#fff;padding-left:5px}.truncate-two-lines{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden;text-overflow:ellipsis;max-width:100%}
`],encapsulation:2})}}return i})();var _e=[{path:"",component:ne},{path:":id",component:se}],re=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=L({type:i})}static{this.\u0275inj=M({imports:[G.forChild(_e),G]})}}return i})();var Re=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=L({type:i})}static{this.\u0275inj=M({providers:[z(J([ie]))],imports:[q,re,ee]})}}return i})();export{Re as ModulesModule};
